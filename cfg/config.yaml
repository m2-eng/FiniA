database:
  host: 127.0.0.1        # Localhost works even from Docker bridge (NAS loopback)
  port: 3306
  name: <YOUR_DATABASE_NAME>  # Used by /api/setup endpoints (not for API login)
                              # API login uses: database_prefix + username (see auth.database_prefix)
  sql_file: ./db/migrations/001_initial_schema.sql
  init_data: ./cfg/data.yaml

  net_read_timeout: 120  # MySQL net_read_timeout in seconds (for long-running queries)
  net_write_timeout: 120 # MySQL net_write_timeout in seconds (for long-running queries)

  max_execution_time: 120000  # Max execution time for queries in seconds (enforced by API)

api:
  # API Server Configuration (Docker & Local Development)
  # These values are read from config.yaml ONLY (no .env needed)
  host: 0.0.0.0          # Bind to all interfaces in Docker
  port: 8000              # Default API port
  # Optional: log_level: info  # Uncomment to override default
  
  # CORS Configuration - Restrict origins for production security
  cors:
    origins:
      - "http://localhost:8000"       # Local API
      - "http://127.0.0.1:8000"
    allow_credentials: true            # Allow Authorization headers and cookies
    allow_methods:
      - "GET"
      - "POST"
      - "PUT"
      - "DELETE"
    allow_headers:
      - "Content-Type"
      - "Authorization"

auth:
  # Auth-Keys werden bei jedem Server-Start NEU generiert (Memory-Only)
  # KEINE Keys mehr in config.yaml oder .env nötig!
  # Alle Sessions werden bei Server-Neustart ungültig (by design)
  
  # JWT Token Expiry (in Stunden)
  jwt_expiry_hours: 24
  
  # Session-Einstellungen
  session_timeout_seconds: 3600  # 1 Stunde Inaktivität
  pool_size: 2  # Connections pro User-Session (für parallele Requests)
  
  # Username → Database Pattern
  username_prefix: ""
  database_prefix: "finiaDB_"
  
  # Rate Limiting
  max_login_attempts: 5
  rate_limit_window_minutes: 15

setup:
  # Optional protection for /api/setup endpoints
  # token can be set via FINIA_SETUP_TOKEN (recommended for Docker)
  token: ""
  allow_localhost: true

import:
  # Default batch size for CSV imports (can be overridden by import format mapping)
  batch_size: 1000
